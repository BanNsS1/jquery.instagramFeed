/*!
 * jquery.instagramFeed
 *
 * @version 1.2.0
 *
 * @author Javier Sanahuja Liebana <bannss1@gmail.com>
 * @contributor csanahuja <csanahuja@gmail.com>
 *
 * https://github.com/jsanahuja/jquery.instagramFeed
 *
 */
!function(e){var a={host:"https://www.instagram.com/",username:"",tag:"",container:"",display_profile:!0,display_biography:!0,display_gallery:!0,display_igtv:!1,get_data:!1,callback:null,styling:!0,aspect_ratio:"1:1",items:8,items_per_row:4,margin:.5,image_size:640},r={150:0,240:1,320:2,480:3,640:4,full:"display_url"},i={"1:1":1,"3:2":.6667,"2:3":1.5,"4:3":.75,"3:4":1.3333,"16:9":.5625};e.instagramFeed=function(t){var s=e.fn.extend({},a,t);if(""==s.username&&""==s.tag)return console.error("Instagram Feed: Error, no username or tag found."),!1;if(void 0!==s.get_raw_json&&(console.warn("Instagram Feed: get_raw_json is deprecated. See use get_data instead"),s.get_data=s.get_raw_json),!s.get_data&&""==s.container)return console.error("Instagram Feed: Error, no container found."),!1;if(s.get_data&&null==s.callback)return console.error("Instagram Feed: Error, no callback defined to get the raw json"),!1;var n=""==s.username,o=n?s.host+"explore/tags/"+s.tag:s.host+s.username;return e.get(o,(function(a){if(a=a.split("window._sharedData = ")[1].split("<\/script>")[0],a=(a=(a=JSON.parse(a.substr(0,a.length-1))).entry_data.ProfilePage||a.entry_data.TagPage)[0].graphql.user||a[0].graphql.hashtag,s.get_data)s.callback(a);else{var t={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:""};if(s.styling){t.profile_container=" style='text-align:center;'",t.profile_image=" style='border-radius:10em;width:15%;max-width:125px;min-width:50px;'",t.profile_name=" style='font-size:1.2em;'",t.profile_biography=" style='font-size:1em;'";var o=(100-2*s.margin*s.items_per_row)/s.items_per_row;t.igtv_image=" style='margin:"+s.margin+"% "+s.margin+"%;width:"+o+"%;float:left;'";var l=void 0!==i[s.aspect_ratio]?i[s.aspect_ratio]:i["1:1"];t.gallery_image="margin:"+s.margin+"% "+s.margin+"%;width:"+o+"%;padding-bottom: "+l*o+"%;float:left;background-size: cover;background-position: center center;"}var g="";s.display_profile&&(g+="<div class='instagram_profile'"+t.profile_container+">",g+="    <img class='instagram_profile_image' src='"+a.profile_pic_url+"' alt='"+a.name+" profile pic'"+t.profile_image+" />",g+=n?"    <p class='instagram_tag'"+t.profile_name+"><a href='https://www.instagram.com/explore/tags/"+s.tag+"' rel='noopener' target='_blank'>#"+s.tag+"</a></p>":"    <p class='instagram_username'"+t.profile_name+">@"+a.full_name+" (<a href='https://www.instagram.com/"+s.username+"' rel='noopener' target='_blank'>@"+s.username+"</a>)</p>",!n&&s.display_biography&&(g+="    <p class='instagram_biography'"+t.profile_biography+">"+a.biography+"</p>"),g+="</div>");var m=void 0!==r[s.image_size]?r[s.image_size]:r[640];if(s.display_gallery)if(void 0!==a.is_private&&!0===a.is_private)g+="<p class='instagram_private'><strong>This profile is private</strong></p>";else{var _=(a.edge_owner_to_timeline_media||a.edge_hashtag_to_media).edges;u=_.length>s.items?s.items:_.length,g+="<div class='instagram_gallery'>";for(var d=0;d<u;d++){var p,c,f="https://www.instagram.com/p/"+_[d].node.shortcode;switch(_[d].node.__typename){case"GraphSidecar":c="sidecar",p="full"==s.image_size?_[d].node[m]:_[d].node.thumbnail_resources[m].src;break;case"GraphVideo":c="video",p=_[d].node.thumbnail_src;break;default:c="image",p="full"==s.image_size?_[d].node[m]:_[d].node.thumbnail_resources[m].src}g+="    <a href='"+f+"' class='instagram-"+c+"' rel='noopener' target='_blank'>",g+="       <div class='instagram_img_holder' alt='"+a.name+" instagram image "+d+"' style='background-image: url("+p+");"+t.gallery_image+"'></div>",g+="    </a>"}g+="</div>"}if(s.display_igtv&&void 0!==a.edge_felix_video_timeline){var h=a.edge_felix_video_timeline.edges,u=h.length>s.items?s.items:h.length;if(h.length>0){g+="<div class='instagram_igtv'>";for(d=0;d<u;d++)g+="    <a href='https://www.instagram.com/p/"+h[d].node.shortcode+"' rel='noopener' target='_blank'>",g+="        <img src='"+h[d].node.thumbnail_src+"' alt='"+s.username+" instagram image "+d+"'"+t.igtv_image+" />",g+="    </a>";g+="</div>"}}e(s.container).html(g)}})).fail((function(e){console.error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: ",e.status)})),!0}}(jQuery);