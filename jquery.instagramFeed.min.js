/*!
 * jquery.instagramFeed
 *
 * @version 1.2.0
 *
 * @author Javier Sanahuja Liebana <bannss1@gmail.com>
 * @contributor csanahuja <csanahuja@gmail.com>
 *
 * https://github.com/jsanahuja/jquery.instagramFeed
 *
 */
(function(b){var c={host:"https://www.instagram.com/",username:"",tag:"",container:"",display_profile:true,display_biography:true,display_gallery:true,display_igtv:false,get_data:false,callback:null,styling:true,items:8,items_per_row:4,margin:0.5,image_size:640};var a={"150":0,"240":1,"320":2,"480":3,"640":4};b.instagramFeed=function(g){var e=b.fn.extend({},c,g);if(e.username==""&&e.tag==""){console.error("Instagram Feed: Error, no username or tag found.");return false}if(typeof e.get_raw_json!=="undefined"){console.warn("Instagram Feed: get_raw_json is deprecated. See use get_data instead");e.get_data=e.get_raw_json}if(!e.get_data&&e.container==""){console.error("Instagram Feed: Error, no container found.");return false}if(e.get_data&&e.callback==null){console.error("Instagram Feed: Error, no callback defined to get the raw json");return false}var f=e.username=="",d=f?e.host+"explore/tags/"+e.tag:e.host+e.username;b.get(d,function(n){n=n.split("window._sharedData = ")[1].split("<\/script>")[0];n=JSON.parse(n.substr(0,n.length-1));n=n.entry_data.ProfilePage||n.entry_data.TagPage;n=n[0].graphql.user||n[0].graphql.hashtag;if(e.get_data){e.callback(n);return}var t={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:""};if(e.styling){t.profile_container=" style='text-align:center;'";t.profile_image=" style='border-radius:10em;width:15%;max-width:125px;min-width:50px;'";t.profile_name=" style='font-size:1.2em;'";t.profile_biography=" style='font-size:1em;'";var j=(100-e.margin*2*e.items_per_row)/e.items_per_row;t.gallery_image=" style='margin:"+e.margin+"% "+e.margin+"%;width:"+j+"%;float:left;'"}var q="";if(e.display_profile){q+="<div class='instagram_profile'"+t.profile_container+">";q+="    <img class='instagram_profile_image' src='"+n.profile_pic_url+"' alt='"+n.name+" profile pic'"+t.profile_image+" />";if(f){q+="    <p class='instagram_tag'"+t.profile_name+"><a href='https://www.instagram.com/explore/tags/"+e.tag+"' rel='noopener' target='_blank'>#"+e.tag+"</a></p>"}else{q+="    <p class='instagram_username'"+t.profile_name+">@"+n.full_name+" (<a href='https://www.instagram.com/"+e.username+"' rel='noopener' target='_blank'>@"+e.username+"</a>)</p>"}if(!f&&e.display_biography){q+="    <p class='instagram_biography'"+t.profile_biography+">"+n.biography+"</p>"}q+="</div>"}var m=typeof a[e.image_size]!=="undefined"?a[e.image_size]:a[640];if(e.display_gallery){if(typeof n.is_private!=="undefined"&&n.is_private===true){q+="<p class='instagram_private'><strong>This profile is private</strong></p>"}else{var p=(n.edge_owner_to_timeline_media||n.edge_hashtag_to_media).edges;s=(p.length>e.items)?e.items:p.length;q+="<div class='instagram_gallery'>";for(var o=0;o<s;o++){var h="https://www.instagram.com/p/"+p[o].node.shortcode,l,k;switch(p[o].node.__typename){case"GraphSidecar":k="sidecar";l=p[o].node.thumbnail_resources[m].src;break;case"GraphVideo":k="video";l=p[o].node.thumbnail_src;break;default:k="image";l=p[o].node.thumbnail_resources[m].src}q+="    <a href='"+h+"' class='instagram-"+k+"' rel='noopener' target='_blank'>";q+="       <img src='"+l+"' alt='"+n.name+" instagram image "+o+"'"+t.gallery_image+" />";q+="    </a>"}q+="</div>"}}if(e.display_igtv&&typeof n.edge_felix_video_timeline!=="undefined"){var r=n.edge_felix_video_timeline.edges,s=(r.length>e.items)?e.items:r.length;if(r.length>0){q+="<div class='instagram_igtv'>";for(var o=0;o<s;o++){q+="    <a href='https://www.instagram.com/p/"+r[o].node.shortcode+"' rel='noopener' target='_blank'>";q+="        <img src='"+r[o].node.thumbnail_src+"' alt='"+e.username+" instagram image "+o+"'"+t.gallery_image+" />";q+="    </a>"}q+="</div>"}}b(e.container).html(q)}).fail(function(h){console.error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: ",h.status)});return true}})(jQuery);