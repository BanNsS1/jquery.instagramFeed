/*!
 * jquery.instagramFeed
 *
 * @version 1.2.1
 *
 * @author Javier Sanahuja Liebana <bannss1@gmail.com>
 * @contributor csanahuja <csanahuja@gmail.com>
 *
 * https://github.com/jsanahuja/jquery.instagramFeed
 *
 */
!function(e){var a={host:"https://www.instagram.com/",username:"",tag:"",container:"",display_profile:!0,display_biography:!0,display_gallery:!0,display_igtv:!1,get_data:!1,callback:null,styling:!0,random:!1,items:8,items_per_row:4,margin:.5,image_size:640},r={150:0,240:1,320:2,480:3,640:4};e.instagramFeed=function(i){var t=e.fn.extend({},a,i);if(""==t.username&&""==t.tag)return console.error("Instagram Feed: Error, no username or tag found."),!1;if(void 0!==t.get_raw_json&&(console.warn("Instagram Feed: get_raw_json is deprecated. See use get_data instead"),t.get_data=t.get_raw_json),!t.get_data&&""==t.container)return console.error("Instagram Feed: Error, no container found."),!1;if(t.get_data&&null==t.callback)return console.error("Instagram Feed: Error, no callback defined to get the raw json"),!1;var n=""==t.username,s=n?t.host+"explore/tags/"+t.tag:t.host+t.username;return e.get(s,(function(a){if(a=a.split("window._sharedData = ")[1].split("<\/script>")[0],a=(a=(a=JSON.parse(a.substr(0,a.length-1))).entry_data.ProfilePage||a.entry_data.TagPage)[0].graphql.user||a[0].graphql.hashtag,t.get_data)t.callback(a);else{var i={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:""};if(t.styling){i.profile_container=" style='text-align:center;'",i.profile_image=" style='border-radius:10em;width:15%;max-width:125px;min-width:50px;'",i.profile_name=" style='font-size:1.2em;'",i.profile_biography=" style='font-size:1em;'";var s=(100-2*t.margin*t.items_per_row)/t.items_per_row;i.gallery_image=" style='margin:"+t.margin+"% "+t.margin+"%;width:"+s+"%;float:left;'"}var o="";t.display_profile&&(o+="<div class='instagram_profile'"+i.profile_container+">",o+="    <img class='instagram_profile_image' src='"+a.profile_pic_url+"' alt='"+a.name+" profile pic'"+i.profile_image+" />",o+=n?"    <p class='instagram_tag'"+i.profile_name+"><a href='https://www.instagram.com/explore/tags/"+t.tag+"' rel='noopener' target='_blank'>#"+t.tag+"</a></p>":"    <p class='instagram_username'"+i.profile_name+">@"+a.full_name+" (<a href='https://www.instagram.com/"+t.username+"' rel='noopener' target='_blank'>@"+t.username+"</a>)</p>",!n&&t.display_biography&&(o+="    <p class='instagram_biography'"+i.profile_biography+">"+a.biography+"</p>"),o+="</div>");var l=void 0!==r[t.image_size]?r[t.image_size]:r[640];if(t.display_gallery)if(void 0!==a.is_private&&!0===a.is_private)o+="<p class='instagram_private'><strong>This profile is private</strong></p>";else{var g=(a.edge_owner_to_timeline_media||a.edge_hashtag_to_media).edges;if(y=g.length>t.items?t.items:g.length,t.random){for(var m=12<y?y:12,_=[],d=0;d<m;++d)_[d]=d;rand_array=function(e){for(var a,r=[],i=0;i<y;i++)a=Math.floor(Math.random()*(m-i)),r.push(a),e.splice(a,1);return r}(_)}o+="<div class='instagram_gallery'>";for(var p=0;p<y;p++){var c,f,h="https://www.instagram.com/p/"+g[d=t.random?rand_array[p]:p].node.shortcode;switch(g[d].node.__typename){case"GraphSidecar":f="sidecar",c=g[d].node.thumbnail_resources[l].src;break;case"GraphVideo":f="video",c=g[d].node.thumbnail_src;break;default:f="image",c=g[d].node.thumbnail_resources[l].src}o+="    <a href='"+h+"' class='instagram-"+f+"' rel='noopener' target='_blank'>",o+="       <img src='"+c+"' alt='"+a.name+" instagram image "+d+"'"+i.gallery_image+" />",o+="    </a>"}o+="</div>"}if(t.display_igtv&&void 0!==a.edge_felix_video_timeline){var u=a.edge_felix_video_timeline.edges,y=u.length>t.items?t.items:u.length;if(u.length>0){o+="<div class='instagram_igtv'>";for(d=0;d<y;d++)o+="    <a href='https://www.instagram.com/p/"+u[d].node.shortcode+"' rel='noopener' target='_blank'>",o+="        <img src='"+u[d].node.thumbnail_src+"' alt='"+t.username+" instagram image "+d+"'"+i.gallery_image+" />",o+="    </a>";o+="</div>"}}e(t.container).html(o)}})).fail((function(e){console.error("Instagram Feed: Unable to fetch the given user/tag. Instagram responded with the status code: ",e.status)})),!0}}(jQuery);